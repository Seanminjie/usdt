# 版本检查和自动更新功能

USDT工资监控系统现在支持自动版本检查和更新功能，让您轻松保持系统最新状态。

## 🚀 快速开始

### Windows 用户

#### 方法1: 使用批处理脚本
```bash
# 交互式版本检查
version-check.bat

# 自动更新（无需确认）
version-check.bat --auto-update

# 显示帮助信息
version-check.bat --help
```

#### 方法2: 使用PowerShell脚本
```powershell
# 交互式版本检查
.\version-check.ps1

# 自动更新（无需确认）
.\version-check.ps1 -AutoUpdate

# 显示帮助信息
.\version-check.ps1 -Help
```

#### 方法3: 使用npm脚本
```bash
# 版本检查
npm run check-version

# 自动更新
npm run update
```

### Linux/macOS 用户

#### 方法1: 使用Shell脚本
```bash
# 交互式版本检查
./version-check.sh

# 自动更新（无需确认）
./version-check.sh --auto-update

# 显示帮助信息
./version-check.sh --help
```

#### 方法2: 使用npm脚本
```bash
# 版本检查
npm run check-version

# 自动更新
npm run update
```

#### 方法3: 直接使用Node.js
```bash
# 交互式版本检查
node version-checker.js

# 自动更新
node version-checker.js --auto-update
```

## 📋 功能特性

### ✅ 版本检查功能
- 🔍 检查当前版本和GitHub最新版本
- 📊 显示详细的版本比较信息
- 📝 展示版本更新日志和新功能
- 🎯 智能判断是否需要更新

### 🔄 自动更新功能
- 📦 自动下载最新版本代码
- 💾 自动备份当前版本
- 🔧 自动安装/更新依赖包
- 🔄 自动重启服务（可选）
- 📋 显示更新进度和状态

### 🛡️ 安全保障
- 🔐 验证下载文件完整性
- 💾 自动创建备份
- 🔄 支持回滚到之前版本
- ⚠️ 更新前环境检查

### 🎨 用户体验
- 🖥️ 跨平台支持（Windows/Linux/macOS）
- 🎯 交互式和自动化两种模式
- 🌈 彩色输出和进度显示
- 📱 友好的错误提示和帮助信息

## 🔧 环境要求

### 必需环境
- **Node.js**: >= 14.0.0
- **npm**: 最新版本
- **网络连接**: 能够访问GitHub

### 可选环境
- **Git**: 用于自动更新功能
- **PowerShell**: Windows用户推荐

## 📖 使用说明

### 交互式模式
交互式模式会：
1. 检查当前版本和最新版本
2. 显示版本差异和更新内容
3. 询问是否要进行更新
4. 根据用户选择执行相应操作

### 自动更新模式
自动更新模式会：
1. 静默检查版本
2. 如果有新版本，自动下载并安装
3. 自动备份当前版本
4. 自动更新依赖包
5. 显示更新结果

## 🔍 版本检查流程

```
开始检查
    ↓
检查运行环境
    ↓
获取当前版本
    ↓
获取GitHub最新版本
    ↓
比较版本差异
    ↓
显示更新信息
    ↓
用户确认（交互式）
    ↓
下载最新代码
    ↓
备份当前版本
    ↓
安装新版本
    ↓
更新依赖包
    ↓
完成更新
```

## 🛠️ 故障排除

### 常见问题

#### 1. 网络连接问题
```
错误: 无法连接到GitHub
解决: 检查网络连接和防火墙设置
```

#### 2. Node.js版本过低
```
错误: Node.js版本不兼容
解决: 升级Node.js到14.0.0或更高版本
```

#### 3. Git未安装
```
警告: Git未安装，自动更新功能不可用
解决: 安装Git或使用手动更新
```

#### 4. 权限问题
```
错误: 文件写入权限不足
解决: 以管理员身份运行或检查文件权限
```

### 调试模式
如果遇到问题，可以查看详细日志：
```bash
# 启用调试模式
DEBUG=1 node version-checker.js
```

## 📝 更新日志

### v1.3.1 (当前版本)
- ✨ 新增版本检查和自动更新功能
- 🎨 优化状态颜色显示
- 🔧 改进CSS样式优先级
- 📱 增强响应式布局
- 🛡️ 提升系统稳定性

### 历史版本
- v1.3.0: 状态颜色优化
- v1.2.0: 批量检查功能
- v1.1.0: 在线Excel上传
- v1.0.0: 基础监控功能

## 🤝 技术支持

如果您在使用版本检查功能时遇到问题：

1. 📖 查看本文档的故障排除部分
2. 🔍 检查系统环境和网络连接
3. 📝 查看错误日志和提示信息
4. 🐛 在GitHub提交Issue报告问题

## 📞 联系方式

- 📧 GitHub Issues: https://github.com/Seanminjie/usdt/issues
- 📚 项目主页: https://github.com/Seanminjie/usdt
- 📖 文档中心: 项目README.md

---

**提示**: 建议定期检查版本更新，以获得最新功能和安全修复。